<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <%- include('common_pages/head') %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css">

    <style>
      .signup-form {
        padding: 2rem 1.5rem; /* Added padding for better spacing */
      }
      
      .otp-inputs {
        display: flex;
        justify-content: center;
        gap: 10px; /* Space between inputs */
        width: 100%;
        max-width: 420px; /* Prevents it from getting too wide */
        margin: 0 auto 1.5rem auto; /* Center the container and add bottom margin */
      }

      .otp-input {
        /* Override Bootstrap's .form-control */
        width: 100%; /* Let flexbox handle the sizing */
        height: auto; /* Let aspect-ratio handle the height */
        
        /* This creates a perfect square that scales. */
        aspect-ratio: 1 / 1; 

        /* To prevent inputs from becoming too large */
        max-width: 55px; 
        
        /* These properties allow the input to shrink and grow correctly */
        flex-grow: 1;
        flex-shrink: 1;
        min-width: 30px; /* Minimum width to prevent it from becoming too small */

        /* Styling */
        text-align: center;
        font-size: 1.5rem;
        font-weight: 600;
        border-radius: 8px;
        border: 1px solid #ced4da;
        transition: all 0.2s ease-in-out;
        padding: 0;
        line-height: 1; /* Helps in vertically centering the digit */
      }
      
      .otp-input:focus {
        border-color: #ff5e14; /* Using your theme's color */
        box-shadow: 0 0 0 0.2rem rgba(255, 94, 20, 0.25);
      }

      /* Fine-tuning for very small screens */
      @media (max-width: 400px) {
        .otp-inputs {
          gap: 8px; /* Slightly smaller gap */
        }
        .otp-input {
          font-size: 1.2rem;
        }
      }
    </style>
</head>

<body>
  <div class="breadcumb-wrapper" data-bg-src="/img/breadcumb/breadcumb-bg.jpg">
    <div class="container z-index-common">
      <div class="breadcumb-content">
        <h1 class="breadcumb-title">Forgot Password</h1>
        <div class="breadcumb-menu-wrap">
          <ul class="breadcumb-menu">
            <li><a href="#">Home</a></li>
            <li>Forgot Password</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="otp-verification-section space-top space-extra-bottom">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
          <div class="signup-form bg-smoke">
            <h2 class="form-title text-center">Enter Verification Code</h2>
            <p class="text-muted text-center mb-4">A 6-digit code has been sent to your email/mobile.</p>
            
            <form action="/verify-otp" method="POST">
              <input type="hidden" name="otp" id="otp-full">
              
              <div class="otp-inputs">
                <input type="tel" class="form-control otp-input" maxlength="1" required>
                <input type="tel" class="form-control otp-input" maxlength="1" required>
                <input type="tel" class="form-control otp-input" maxlength="1" required>
                <input type="tel" class="form-control otp-input" maxlength="1" required>
                <input type="tel" class="form-control otp-input" maxlength="1" required>
                <input type="tel" class="form-control otp-input" maxlength="1" required>
              </div>
              
              <button type="submit" class="vs-btn mask-style1 w-100 style4">Verify OTP</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <%- include('common_pages/footer') %>

  <a href="#" class="scrollToTop scroll-btn"><i class="fas fa-arrow-up"></i></a>
  
  <script src="/js/vendor/jquery-3.6.0.min.js"></script>
  <script src="/js/slick.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/jquery.magnific-popup.min.js"></script>
  <script src="/js/jquery-ui.min.js"></script>
  <script src="/js/circle-progress.min.js"></script>
  <script src="/js/imagesLoaded.js"></script>
  <script src="/js/isotope.js"></script>
  <script src="/js/wow.min.js"></script>
  <script src="/js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js"></script>

  <% if (typeof error !=='undefined' && error) { %>
    <script>
      iziToast.error({
        title: 'Error',
        message: '<%= error %>',
        position: 'topRight' 
      });
    </script>
  <% } %>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const otpInputs = document.querySelectorAll('.otp-input');
      const hiddenInput = document.getElementById('otp-full');
      const form = hiddenInput.closest('form');

      const updateHiddenInput = () => {
        let otpValue = '';
        otpInputs.forEach(input => {
          otpValue += input.value;
        });
        hiddenInput.value = otpValue;
      };

      otpInputs.forEach((input, index) => {
        input.addEventListener('input', (e) => {
          input.value = input.value.replace(/[^0-9]/g, '');
          
          if (input.value && index < otpInputs.length - 1) {
            otpInputs[index + 1].focus();
          }
          updateHiddenInput();
        });

        input.addEventListener('keydown', (e) => {
          if (e.key === 'Backspace' && !input.value && index > 0) {
            otpInputs[index - 1].focus();
          }
        });

        if (index === 0) {
          input.addEventListener('paste', (e) => {
            e.preventDefault();
            const pastedData = (e.clipboardData || window.clipboardData).getData('text').trim();
            if (/^\d{6}$/.test(pastedData)) {
              pastedData.split('').forEach((char, i) => {
                if (otpInputs[i]) {
                  otpInputs[i].value = char;
                }
              });
              updateHiddenInput();
              otpInputs[otpInputs.length - 1].focus();
            }
          });
        }
      });
    });
  </script>

</body>
</html>